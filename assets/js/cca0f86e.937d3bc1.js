"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[829],{3905:(e,t,n)=>{n.d(t,{Zo:()=>s,kt:()=>f});var o=n(7294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function a(e,t){if(null==e)return{};var n,o,r=function(e,t){if(null==e)return{};var n,o,r={},p=Object.keys(e);for(o=0;o<p.length;o++)n=p[o],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var p=Object.getOwnPropertySymbols(e);for(o=0;o<p.length;o++)n=p[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var i=o.createContext({}),l=function(e){var t=o.useContext(i),n=t;return e&&(n="function"==typeof e?e(t):c(c({},t),e)),n},s=function(e){var t=l(e.components);return o.createElement(i.Provider,{value:t},e.children)},u="mdxType",d={inlineCode:"code",wrapper:function(e){var t=e.children;return o.createElement(o.Fragment,{},t)}},m=o.forwardRef((function(e,t){var n=e.components,r=e.mdxType,p=e.originalType,i=e.parentName,s=a(e,["components","mdxType","originalType","parentName"]),u=l(n),m=r,f=u["".concat(i,".").concat(m)]||u[m]||d[m]||p;return n?o.createElement(f,c(c({ref:t},s),{},{components:n})):o.createElement(f,c({ref:t},s))}));function f(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var p=n.length,c=new Array(p);c[0]=m;var a={};for(var i in t)hasOwnProperty.call(t,i)&&(a[i]=t[i]);a.originalType=e,a[u]="string"==typeof e?e:r,c[1]=a;for(var l=2;l<p;l++)c[l]=n[l];return o.createElement.apply(null,c)}return o.createElement.apply(null,n)}m.displayName="MDXCreateElement"},4311:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>i,contentTitle:()=>c,default:()=>u,frontMatter:()=>p,metadata:()=>a,toc:()=>l});var o=n(7462),r=(n(7294),n(3905));const p={},c="noexcept",a={unversionedId:"cpp/noexcept",id:"cpp/noexcept",title:"noexcept",description:"The noexcept operator performs a compile-time check that returns true if an expression is declared to not throw any expressions.",source:"@site/docs/cpp/18. noexcept.md",sourceDirName:"cpp",slug:"/cpp/noexcept",permalink:"/cpp/cpp/noexcept",draft:!1,tags:[],version:"current",sidebarPosition:18,frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"explicit",permalink:"/cpp/cpp/explicit"},next:{title:"friend \u7c7b\u548c\u51fd\u6570",permalink:"/cpp/cpp/friend"}},i={},l=[{value:"\u4f5c\u4e3a\u6807\u8bc6\u7b26",id:"\u4f5c\u4e3a\u6807\u8bc6\u7b26",level:2},{value:"\u4f5c\u4e3a\u8fd0\u7b97\u7b26",id:"\u4f5c\u4e3a\u8fd0\u7b97\u7b26",level:2}],s={toc:l};function u(e){let{components:t,...n}=e;return(0,r.kt)("wrapper",(0,o.Z)({},s,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"noexcept"},"noexcept"),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"The noexcept operator performs a compile-time check that returns ",(0,r.kt)("inlineCode",{parentName:"p"},"true")," if an expression is declared to not throw any expressions.")),(0,r.kt)("p",null,"noexcept \u53ef\u4ee5\u4f5c\u4e3a\u6807\u8bc6\u7b26\u6216\u8005\u8fd0\u7b97\u7b26\u4f7f\u7528"),(0,r.kt)("h2",{id:"\u4f5c\u4e3a\u6807\u8bc6\u7b26"},"\u4f5c\u4e3a\u6807\u8bc6\u7b26"),(0,r.kt)("p",null,"function \u540e\u58f0\u660e\u6807\u8bc6\u7b26\u540e\uff0c\u8868\u793a\u8be5\u51fd\u6570\u4e0d\u4f1a\u629b\u51fa\u5f02\u5e38\uff0c\u5982\u679c\u629b\u51fa\u5f02\u5e38\uff0c\u7a0b\u5e8f\u5d29\u6e83\u5c31\u597d\u4e86\u3002"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-cpp"},"void func1() noexcept;        // does not throw\nvoid func2() noexcept(true);  // does not throw\nvoid func3() throw();         // does not throw\n\nvoid func4() noexcept(false); // may throw\n")),(0,r.kt)("p",null,"\u5176\u4e2d\uff0cthrow() \u76f8\u5f53\u4e8e noexcept(true)"),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"There are two good reasons for the use of noexcept: First, an exception specifier documents the behaviour of the function. If a function is specified as noexcept, it can be safely used in a non-throwing function. Second, it is an optimisation opportunity for the compiler. noexcept may not call std::unexpectedand may not unwind the stack. The initialisation of a container may cheap move the elements into the container if the move constructor is declared as noexcept. If not declared as noexcept, the elements may be expensive copied into the container.")),(0,r.kt)("p",null,"C++ \u4e2d\u7684\u51fd\u6570\uff0c\u8981\u4e48\u4e0d\u4f1a\u629b\u51fa\u5f02\u5e38\uff0c\u8981\u4e48\u53ef\u80fd\u629b\u51fa\u5f02\u5e38\uff0c\u53ef\u80fd\u629b\u51fa\u5f02\u5e38\u6307\uff1a"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"\u51fd\u6570\u4e2d\u4f7f\u7528\u4e86\u53ef\u80fd\u629b\u51fa\u5f02\u5e38\u7684\u5176\u4ed6\u51fd\u6570"),(0,r.kt)("li",{parentName:"ol"},"\u51fd\u6570\u672a\u4f7f\u7528 noexcept \u6807\u8bc6\u7b26"),(0,r.kt)("li",{parentName:"ol"},"\u51fd\u6570\u4f7f\u7528\u4e86 dynamic_cast\uff08\u8fd0\u884c\u65f6\u5f3a\u8f6c\uff09")),(0,r.kt)("p",null,"\u6784\u9020\u51fd\u6570\u3001\u6790\u6784\u51fd\u6570\u3001\u62f7\u8d1d\u6784\u9020\u51fd\u6570\u3001Move \u6784\u9020\u51fd\u6570\u3001\u62f7\u8d1d\u8d4b\u503c\u51fd\u6570\u3001Move \u8d4b\u503c\u51fd\u6570\u4e0d\u7b26\u5408 #2."),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"This special six member such as the destructor can only be non-throwing if all destructors of the attributes, and the bases-classes are non-throwing. Of course, the corresponding statement will hold for the five other special member functions.")),(0,r.kt)("h2",{id:"\u4f5c\u4e3a\u8fd0\u7b97\u7b26"},"\u4f5c\u4e3a\u8fd0\u7b97\u7b26"),(0,r.kt)("p",null,"\u4f5c\u4e3a\u8fd0\u7b97\u7b26\u4f7f\u7528\u65f6\uff0c",(0,r.kt)("inlineCode",{parentName:"p"},"noexcept")," \u4f1a\u5728\u7f16\u8bd1\u9636\u6bb5\u68c0\u67e5\u8868\u8fbe\u5f0f\u662f\u5426\u629b\u51fa\u5f02\u5e38\uff08\u5e76\u4e0d\u6267\u884c\u8be5\u8868\u8fbe\u5f0f\uff09\u3002"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-cpp"},'class NoexceptCopy {\npublic:\n  std::array<int, 5> arr{1, 2, 3, 4, 5}; // (2)\n};\n\nclass NonNoexceptCopy {\npublic:\n  std::vector<int> v{1, 2, 3, 4, 5}; // (3)\n};\n\ntemplate <typename T>\nT copy(T const &src) noexcept(\n    std::is_nothrow_copy_constructible<T>::value) { // (1)\n  return src;\n}\n\nint main() {\n  NoexceptCopy noexceptCopy;\n  NonNoexceptCopy nonNoexceptCopy;\n\n  std::cout << std::boolalpha << std::endl;\n\n  std::cout << "noexcept(copy(noexceptCopy)): " << // (4)\n      noexcept(copy(noexceptCopy)) << std::endl;\n\n  std::cout << "noexcept(copy(nonNoexceptCopy)): " << // (5)\n      noexcept(copy(nonNoexceptCopy)) << std::endl;\n\n  std::cout << std::endl;\n}\n')),(0,r.kt)("p",null,"output:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-txt"},"noexcept(copy(noexceptCopy)): true\nnoexcept(copy(nonNoexceptCopy)): false\n")),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"reference: ",(0,r.kt)("a",{parentName:"p",href:"https://www.modernescpp.com/index.php/c-core-guidelines-the-noexcept-specifier-and-operator"},"https://www.modernescpp.com/index.php/c-core-guidelines-the-noexcept-specifier-and-operator"))))}u.isMDXComponent=!0}}]);